태그는 어떻게 DB로 관리해야할지?

태그

[ 태그 검색 ]

- > 캐쉬 써야함 -> 인기 순위 count --> db에서 하면 디비 터짐
- 테이블로 분리
- 

리스트 어떻게 보여주나?
-1.태그 테이블에서 모든정보를 다 끌어온다.
2. 서버에서 각 태그 key별로 카운트를 계산한다.
3. 카운트 된 정보를 캐시에 올린다. (2차가공)
spring cache -> 찾아보자,,, 유저가 오면 캐시에서 줌 DB에서 줌
(실시간 하고싶으면) 배치로 1시간에 한번씩 갱신
4.

- 캐시증발시? 방어전략. 없을때의 예외처리
-> 캐시에 쓰는 동시에 디비에 바로 가져오도록 -> 연산시 디비에 저장
-> 디비에 쓰는 동시에 캐시에 또 올림.
-> 시퀀스 다이어그램 그려놓기.

=> 실시간 검색어 처럼 활용가능.
=> 활용하기

연산서버..따로뺀다, , , , , , , ,주륵주륵 주륵. . . .

- 몇개씩 쌓아놓고 일정량 이상 쌓이면 계산하도록 하면 어떨까요?
-> 태그가 1000개 단위로~ 1000개단위 + 시간이랑 정책적
- > 인기는 실시간

data 타입에 따라서 정확히 일치해야함.
오토인크리먼트
최신 top1

---

피드 테이블 질문

- 달성률 계산지 통계 테이블을 따로 두는게 나은가?

해당 챌린지의 100%기준을 계산

- 완료된 챌린지의 전체 달성률 계산시
-> 1인 사용자의 챌린지 달성률을 다 계산후 평균
( count)
- 통계 페이지에서 달성을 완료하면 보여줘야함.
1인 달성률

=>  피드 계산

1. 완료 여부 index 잡기
2. 내가 참여한 챌린지 중 시작날짜가 당월인 완료된 첼린지의 시작날짜, 끝날짜
하루인증날짜, 요일 가져옴
3. 내가 참여한 챌린지 별 피드 리스트 서버로 가져옴
4. 서버에서 달성률 계산
- 중복연산 절대 안돼
- 유저가 통계 페이지에 접근하는 애들만해.
-> redis 쓴다. => 유저별로 관리. -> 캐시에 올리고 중복계산 피하고
캐시 보여줌
-> 계산
1. 피드가 업데이트 될때마다 캐시 업데이트
- 년..불가. . . . . . . . . . . . . . . . .
- 유저가 캐시를 1주일동안 read를 안하면 삭제. (유저_월 복합키로)
- 쿼리 시간보는거 (1초이상 서비스불가)

---

- 참여 테이블 질문 (전체 참여자수 계산)
- 사용자가 참여 버튼 누를때마다 실시간으로 할지?
- 리스트 뿌려줄때마다 count?
- count를 계속써도 되는지?
아님 서버에서 객채로 가져온후 서버에서 count?
- 참가자수 테이블 필요한지?

=> 중복연산 캐시
redis..  => 캐시서버 중복x
key, value

- 리스트별로 참여자수를 계산해요 -> 라이브 중에 불가
캐시에 먼저 계산한 상태 데이터 올려놓고
보여줘야할 썸네일은 redis key value 형태로
프로필사진, 리스트명, 총참가자수
1. 호출하는건 캐시에서 조회
2. 실시간성 필요
참여 테이블에 insert하면, 캐시 값을 업데이트

---

1. 캐시를 미러링
캐시랑 똑같은거 하나 더 만들고 걔도 업데이트

---

- 이미지 타입 어떻게 할지? varcahr 크기 질문 -> url 그대로 쓴다면 50도 충분
사용자 식별번호 - 난수로 해라. 13자리 ai 빼는거 필수. -> string으로 추천
- 카카오 인증키 varchar길이 -> api 명세에 나옴. key name 정해줌
- 카카오 인증키로 로그인하면 사용자 이메일, 비밀번호, 닉네임 이런거 not null로?
->
카카오 채널 테이블 따로하거나.. -> 카카오 인증했을때도 로직 발급해서 넣어야함.

---

태그는 어떻게 DB로 관리해야할지?

태그

[ 태그 검색 ]

- > 캐쉬 써야함 -> 인기 순위 count --> db에서 하면 디비 터짐
- 테이블로 분리
- 

리스트 어떻게 보여주나?
-1.태그 테이블에서 모든정보를 다 끌어온다.
2. 서버에서 각 태그 key별로 카운트를 계산한다.
3. 카운트 된 정보를 캐시에 올린다. (2차가공)
spring cache -> 찾아보자,,, 유저가 오면 캐시에서 줌 DB에서 줌
(실시간 하고싶으면) 배치로 1시간에 한번씩 갱신
4.

- 캐시증발시? 방어전략. 없을때의 예외처리
-> 캐시에 쓰는 동시에 디비에 바로 가져오도록 -> 연산시 디비에 저장
-> 디비에 쓰는 동시에 캐시에 또 올림.
-> 시퀀스 다이어그램 그려놓기.

=> 실시간 검색어 처럼 활용가능.
=> 활용하기

연산서버..따로뺀다, , , , , , , ,주륵주륵 주륵. . . .

- 몇개씩 쌓아놓고 일정량 이상 쌓이면 계산하도록 하면 어떨까요?
-> 태그가 1000개 단위로~ 1000개단위 + 시간이랑 정책적
- > 인기는 실시간

data 타입에 따라서 정확히 일치해야함.
오토인크리먼트
최신 top1

---

피드 테이블 질문

- 달성률 계산지 통계 테이블을 따로 두는게 나은가?

해당 챌린지의 100%기준을 계산

- 완료된 챌린지의 전체 달성률 계산시
-> 1인 사용자의 챌린지 달성률을 다 계산후 평균
( count)
- 통계 페이지에서 달성을 완료하면 보여줘야함.
1인 달성률

=>  피드 계산

1. 완료 여부 index 잡기
2. 내가 참여한 챌린지 중 시작날짜가 당월인 완료된 첼린지의 시작날짜, 끝날짜
하루인증날짜, 요일 가져옴
3. 내가 참여한 챌린지 별 피드 리스트 서버로 가져옴
4. 서버에서 달성률 계산
- 중복연산 절대 안돼
- 유저가 통계 페이지에 접근하는 애들만해.
-> redis 쓴다. => 유저별로 관리. -> 캐시에 올리고 중복계산 피하고
캐시 보여줌
-> 계산
1. 피드가 업데이트 될때마다 캐시 업데이트
- 년..불가. . . . . . . . . . . . . . . . .
- 유저가 캐시를 1주일동안 read를 안하면 삭제. (유저_월 복합키로)
- 쿼리 시간보는거 (1초이상 서비스불가)

---

- 참여 테이블 질문 (전체 참여자수 계산)
- 사용자가 참여 버튼 누를때마다 실시간으로 할지?
- 리스트 뿌려줄때마다 count?
- count를 계속써도 되는지?
아님 서버에서 객채로 가져온후 서버에서 count?
- 참가자수 테이블 필요한지?

=> 중복연산 캐시
redis..  => 캐시서버 중복x
key, value

- 리스트별로 참여자수를 계산해요 -> 라이브 중에 불가
캐시에 먼저 계산한 상태 데이터 올려놓고
보여줘야할 썸네일은 redis key value 형태로
프로필사진, 리스트명, 총참가자수
1. 호출하는건 캐시에서 조회
2. 실시간성 필요
참여 테이블에 insert하면, 캐시 값을 업데이트

---

1. 캐시를 미러링
캐시랑 똑같은거 하나 더 만들고 걔도 업데이트

---

- 이미지 타입 어떻게 할지? varcahr 크기 질문 -> url 그대로 쓴다면 50도 충분
사용자 식별번호 - 난수로 해라. 13자리 ai 빼는거 필수. -> string으로 추천
- 카카오 인증키 varchar길이 -> api 명세에 나옴. key name 정해줌
- 카카오 인증키로 로그인하면 사용자 이메일, 비밀번호, 닉네임 이런거 not null로?
->
카카오 채널 테이블 따로하거나.. -> 카카오 인증했을때도 로직 발급해서 넣어야함.

---