태그는 어떻게 DB로 관리해야할지?

태그

[ 태그 검색 ]

- > 캐쉬 써야함 -> 인기 순위 count --> db에서 하면 디비 터짐
- 테이블로 분리
- 

리스트 어떻게 보여주나?
-1.태그 테이블에서 모든정보를 다 끌어온다.
2. 서버에서 각 태그 key별로 카운트를 계산한다.
3. 카운트 된 정보를 캐시에 올린다. (2차가공)
spring cache -> 찾아보자,,, 유저가 오면 캐시에서 줌 DB에서 줌
(실시간 하고싶으면) 배치로 1시간에 한번씩 갱신
4.

- 캐시증발시? 방어전략. 없을때의 예외처리
-> 캐시에 쓰는 동시에 디비에 바로 가져오도록 -> 연산시 디비에 저장
-> 디비에 쓰는 동시에 캐시에 또 올림.
-> 시퀀스 다이어그램 그려놓기.

=> 실시간 검색어 처럼 활용가능.
=> 활용하기

연산서버..따로뺀다, , , , , , , ,주륵주륵 주륵. . . .

- 몇개씩 쌓아놓고 일정량 이상 쌓이면 계산하도록 하면 어떨까요?
-> 태그가 1000개 단위로~ 1000개단위 + 시간이랑 정책적
- > 인기는 실시간

---

통계 DB에 저장할지?
-> 끌고 와서 계산해서 줘버림
-> 통계도 캐시에 같이
-> 완료 할때마다 갱신.

- > 캐시에 업데이트하는거 별로. . 유저가 필요할때만 연산

채팅은 DB설계 어떻게 해야하는지?
-> 세션정보 저장. 챌린지별 채팅
채팅 로그, 다 저장. 보관기간, 백업정책, 데이터비우는

---

- 이미지 타입 어떻게 할지? varcahr 크기 질문 -> url 그대로 쓴다면 50도 충분
사용자 식별번호 - 난수로 해라. 13자리 ai 빼는거 필수. -> string으로 추천
- 카카오 인증키 varchar길이 -> api 명세에 나옴. key name 정해줌
- 카카오 인증키로 로그인하면 사용자 이메일, 비밀번호, 닉네임 이런거 not null로?
->
카카오 채널 테이블 따로하거나.. -> 카카오 인증했을때도 로직 발급해서 넣어야함.